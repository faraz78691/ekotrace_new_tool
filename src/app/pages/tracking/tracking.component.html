<div class="container-fluid px-0 mt-4">
    <div class="row mb-0 pt-0">

    </div>
    <div class="row pt-2 ml-0 mx-0 px-0">
        <div class="col-lg-3  mb-4  px-2">
            <div class=" TrackingDiv-border Dashboard-tab ct_dash_board_tab ct_hide_scroll_239 ct_scroll_60012_left"
                style="height: calc(100vh - 130px);" [ngClass]="facilitynothavedp === 'block' ? 'fornodata' : ''">


                <div [ngStyle]="{display: facilitynothavedp}" class="text-white noData" style="justify-content: center">
                    <div>
                        <div class="icon mt-3">
                            <i class="fa fa-info-circle" style="font-size: 20px" aria-hidden="true"></i>
                        </div>
                        <label class="label">
                            Please add data points for this facility.</label>
                    </div>
                </div>
                <div [ngStyle]="{display: forGroup}" class="text-white noData" style="justify-content: center">
                    <div>
                        <div class="icon mt-3">
                            <i class="fa fa-info-circle" style="font-size: 20px" aria-hidden="true"></i>
                        </div>
                        <label class="label"> Please select facility</label>
                    </div>
                </div>

                <div [ngStyle]="{display: facilityhavedp}" class="modal-body text-white text-style">
                    <form #addCompForm="ngForm" class="" (ngSubmit)="openDatapointDialog()">
                        <div class="row d-flex justify-content-between tabviewclass">
                            <p-tabView [activeIndex]="0" class="w-100">


                                <!-- scope 3 govind categories -->
                                <ng-container *ngFor="let seed of AssignedDataPoint; let i = index">
                                    <p-tabPanel *ngIf="seed.ScopeID !=3">


                                        <ng-template pTemplate="header">
                                            {{ seed.scopeName }}
                                        </ng-template>
                                        <div class="cardDiv">
                                            <div class="calenderDiv flex row">
                                                <div
                                                    class="selectmonth col card justify-content-center ct_month_select_clr ct_multi_input_38 ct_month_light_green">
                                                    <p-multiSelect [options]="months" placeholder="Months" name="months"
                                                        [(ngModel)]="selectMonths" styleClass="pcalender"
                                                        optionLabel="name"
                                                        (onChange)="onMonthsChange($event)"></p-multiSelect>
                                                </div>
                                                <div
                                                    class="selectyear ct_calander_input col ct_calender_38 ct_month_light_green ct_calender_font_size">
                                                    <p-calendar class="w-100" ngModel name="year" year
                                                        [(ngModel)]="year" styleClass="pcalender" view="year"
                                                        dateFormat="yy" inputId="yearpicker"
                                                        (ngModelChange)="onYearChange()" [showIcon]="true"></p-calendar>
                                                </div>
                                            </div>

                                            <div>

                                                <div class="card ct_shadow_none flex justify-content-center ">
                                                    <p-accordion class="ct_accordian_height_48vh12"
                                                        [ngStyle]="{'background-color': '#f5f5f5'}"
                                                        styleClass="accordianclass bg-unset"
                                                        [activeIndex]="accordianIndex" [multiple]="false">
                                                        <ng-container>

                                                            <ng-container
                                                                *ngFor="let head of seed.manageDataPointCategories; let i = index">

                                                                <ng-container
                                                                    *ngIf="head.manageDataPointSubCategories.length > 0">
                                                                    <p-accordionTab [selected]="false">
                                                                        <ng-template style="height: 8px;"
                                                                            pTemplate="header">
                                                                            {{head.catName }}
                                                                            <div class="iicon">
                                                                                <i *ngIf="head.catName == 'Stationary Combustion'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Direct emissions from owned or controlled stationary sources that uses fossil fuels.
                                                                                      
                                                                                       " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Refrigerants'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Direct emissions from owned or controlled stationary sources that emit fugitive emissions"
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Company Owned Vehicles'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from owned mobile sources (both on-road and non-road vehicles) that are within the company’s inventory boundaries.
                                                                                        
                                                                                        " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Fire Extinguisher'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Direct emissions released into the atmosphere from the use and maintenance of fire extinguishers."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Electricity'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Indirect emissions associated with the generation of purchased electricity used by a company."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Heat and Steam'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Indirect emissions associated with the generation of heat and steam used by a company."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                            </div>

                                                                        </ng-template>

                                                                        <div id="DPRow" *ngFor="
                                                                                let child of head.manageDataPointSubCategories
                                                                            "
                                                                            class=" px-4 border-bottom ct_scoope_1_tab et_scoope_1_tab_py_8 ct_tab_active_12"
                                                                            [ngClass]="{
                                                                                'active':
                                                                                    activeID === child.manageDataPointSubCategorySeedID
                                                                            }">
                                                                            <div clickable (click)="
                                                                                    SubCatData(
                                                                                        child,
                                                                                        head.manageDataPointCategorySeedID, head.catName
                                                                                    )
                                                                                "
                                                                                class="col pointer d-flex ct_tab_active_12 "
                                                                                pTooltip="{{ child.subCatName}}"
                                                                                tooltipPosition="bottom">
                                                                                {{ child.subCatName}}
                                                                            </div>

                                                                        </div>

                                                                    </p-accordionTab>
                                                                </ng-container>


                                                            </ng-container>
                                                        </ng-container>
                                                    </p-accordion>
                                                </div>
                                            </div>
                                        </div>

                                    </p-tabPanel>
                                    <!-- for intermediate and cusotmized package -->
                                    <p-tabPanel *ngIf="seed.ScopeID ==3 && this.haveBasicPackage != 1">
                                        <ng-template pTemplate="header">
                                            {{ seed.scopeName }}

                                        </ng-template>
                                        <div class="cardDiv">
                                            <div class="calenderDiv flex row">
                                                <div
                                                    class="selectmonth col card justify-content-center ct_month_select_clr ct_multi_input_38 ct_month_light_green ">
                                                    <p-multiSelect [options]="months" placeholder="Months" name="months"
                                                        [(ngModel)]="selectMonths" styleClass="pcalender"
                                                        optionLabel="name"
                                                        (onChange)="onMonthsChange($event)"></p-multiSelect>
                                                </div>
                                                <div
                                                    class="selectyear ct_calander_input col ct_calender_38 ct_month_light_green ct_calender_font_size">
                                                    <p-calendar class="w-100" ngModel name="year" year
                                                        [(ngModel)]="year" styleClass="pcalender" view="year"
                                                        dateFormat="yy" inputId="yearpicker"
                                                        (ngModelChange)="onYearChange()" [showIcon]="true"></p-calendar>
                                                </div>
                                            </div>
                                            <!-- <div class="searchWidthDP form-group has-search ct_calander_input ">
                                                <span class="fa fa-search form-control-feedback"></span>
                                                <input type="text" class="form-control" placeholder=" Search" />
                                            </div> -->
                                            <div class="ct_overflow_box" style="max-height: 100%;">

                                                <div
                                                    class="card ct_shadow_none  flex justify-content-center ct_scope_3cata_list">
                                                    <p-accordion styleClass="accordianclass ct_accordian_height_48vh12"
                                                        [activeIndex]="accordianIndex" [multiple]="false">
                                                        <ng-container>

                                                            <ng-container
                                                                *ngFor="let head of seed.manageDataPointCategories">
                                                                <ng-container
                                                                    *ngIf="head.manageDataPointSubCategories.length > 0">

                                                                    <div id="DPRow" *ngFor="
                                                                            let child of head.manageDataPointSubCategories
                                                                        "
                                                                        class="py-2 px-4 border-bottom ct_scope_3_cata_list ct_scoope_1_tab"
                                                                        [ngClass]="{'active':activeID === child.manageDataPointSubCategorySeedID  && head.manageDataPointCategorySeedID !==13}">
                                                                        <div *ngIf="head.manageDataPointCategorySeedID !==13"
                                                                            clickable (click)="
                                                                                SubCatData(
                                                                                    child,
                                                                                    head.manageDataPointCategorySeedID, head.catName
                                                                                )
                                                                            "
                                                                            class="col pointer d-flex align-items-center"
                                                                            tooltipPosition="bottom">
                                                                            {{ child.subCatName}}


                                                                            <div class="iicon">
                                                                                <i *ngIf="child.subCatName == 'Purchased goods and services'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Upstream emissions from the production of goods and services that the reporting company purchases.
                                                                                  
                                                                                   " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Fuel and Energy-related Activities'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Indirect emissions associated with the production, processing, and transportation of fuels and energy that are consumed by the reporting company but not included in Scope 1 or Scope 2 emissions.
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Upstream Transportation and Distribution'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the transportation and distribution of products purchased by the company, from suppliers to the company’s facilities.
                                                                                    
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Water Supply and Treatment'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the disposal and treatment of waste generated in the company’s operations."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Waste generated in operations'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the disposal and treatment of waste generated in the company’s operations.
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Employee Commuting'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the transportation of employees between their homes and workplaces.
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Home Office'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions associated with company staff working from home."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Upstream Leased Assets'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip=" Emissions from the operation of assets leased by the company from other entities.
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Downstream Transportation and Distribution'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the transportation and distribution of products sold by the company to end-users, including retail and storage."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Processing of Sold Products'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the processing of intermediate products sold by the company. 
                                                                                    " tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>

                                                                                <i *ngIf="head.catName == 'Use of Sold Products'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the use of products sold by the company."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'End-of-life Treatment of Sold Products'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the disposal and treatment of products sold by the company at the end of their life."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                                <i *ngIf="head.catName == 'Downstream Leased Assets'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the operation of assets owned by the company and leased to other entities."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>

                                                                                <i *ngIf="head.catName == 'Franchises'"
                                                                                    class="fa fa-info-circle tooltip-icon"
                                                                                    pTooltip="Emissions from the operations of franchises owned by the company."
                                                                                    tooltipPosition="top"
                                                                                    style="color: #88ad47"></i>
                                                                            </div>
                                                                        </div>
                                                                        <p-accordion>
                                                                            <p-accordionTab
                                                                                class="ct_business_drop_12_main position-relative"
                                                                                header="Business Travel"
                                                                                *ngIf="head.manageDataPointCategorySeedID ==13"
                                                                                clickable (click)="
                                                                                ToggleClick();
                                                                            " pTooltip="{{ child.subCatName }}">
                                                                                <div
                                                                                    class="iicon ct_business_icon_info12">
                                                                                    <i class="fa fa-info-circle tooltip-icon"
                                                                                        pTooltip="Emissions from the transportation of employees for business-related activities."
                                                                                        tooltipPosition="top"
                                                                                        style="color: #88ad47"></i>
                                                                                </div>

                                                                                <ul class="ct_dropdwon_item"
                                                                                    [class.ct_open_modal]="isVisited === true">
                                                                                    <li [ngClass]="{'active_2' : businessId === 24 && activeID === child.manageDataPointSubCategorySeedID}"
                                                                                        (click)="setActive(24,  child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Flight
                                                                                    </li>
                                                                                    <li [ngClass]="{'active_2' : businessId === 25 && activeID === child.manageDataPointSubCategorySeedID}"
                                                                                        (click)="setActive(25,  child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Hotel
                                                                                        Stay
                                                                                    </li>
                                                                                    <li [ngClass]="{'active_2' : businessId === 26 && activeID === child.manageDataPointSubCategorySeedID}"
                                                                                        (click)="setActive(26,  child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Other
                                                                                        Modes
                                                                                        of Transport
                                                                                    </li>
                                                                                </ul>
                                                                            </p-accordionTab>
                                                                        </p-accordion>
                                                                    </div>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                    </p-accordion>
                                                </div>
                                            </div>
                                        </div>
                                    </p-tabPanel>

                                    <!-- for basic package -->
                                    <p-tabPanel *ngIf="seed.ScopeID ==3 && this.haveBasicPackage === 1">
                                        <ng-template pTemplate="header">
                                            {{ seed.scopeName }}

                                        </ng-template>
                                        <div class="cardDiv">
                                            <div class="calenderDiv flex row">
                                                <div
                                                    class="selectmonth col card justify-content-center ct_month_select_clr ct_multi_input_38 ct_month_light_green ">
                                                    <p-multiSelect [options]="months" placeholder="Months" name="months"
                                                        [(ngModel)]="selectMonths" styleClass="pcalender"
                                                        optionLabel="name"
                                                        (onChange)="onMonthsChange($event)"></p-multiSelect>
                                                </div>
                                                <div
                                                    class="selectyear ct_calander_input col ct_calender_38 ct_month_light_green ct_calender_font_size">
                                                    <p-calendar class="w-100" ngModel name="year" year
                                                        [(ngModel)]="year" styleClass="pcalender" view="year"
                                                        dateFormat="yy" inputId="yearpicker"
                                                        (ngModelChange)="onYearChange()" [showIcon]="true"></p-calendar>
                                                </div>
                                            </div>
                                            <!-- <div class="searchWidthDP form-group has-search ct_calander_input ">
                                                <span class="fa fa-search form-control-feedback"></span>
                                                <input type="text" class="form-control" placeholder=" Search" />
                                            </div> -->
                                            <div class="ct_overflow_box" style="max-height: 100%;">

                                                <div
                                                    class="card ct_shadow_none  flex justify-content-center ct_scope_3cata_list">
                                                    <p-accordion styleClass="accordianclass ct_accordian_height_48vh12"
                                                        [activeIndex]="accordianIndex" [multiple]="false">
                                                        <ng-container>

                                                            <ng-container *ngFor="
                                                        let head of seed.manageDataPointCategories
                                                    ">
                                                                <ng-container
                                                                    *ngIf="
                                                                head.manageDataPointCategorySeedID === 13 || head.manageDataPointCategorySeedID === 14">


                                                                    <div id="DPRow" *ngFor="
                                                                            let child of head.manageDataPointSubCategories
                                                                        "
                                                                        class="py-2 px-4 border-bottom ct_scope_3_cata_list ct_scoope_1_tab"
                                                                        [ngClass]="{
                                                                            'active':
                                                                                activeID === child.manageDataPointSubCategorySeedID && head.manageDataPointCategorySeedID !==13
                                                                        }">
                                                                        <div *ngIf="head.manageDataPointCategorySeedID !==13"
                                                                            clickable (click)="
                                                                                SubCatData(
                                                                                    child,
                                                                                    head.manageDataPointCategorySeedID, head.catName
                                                                                )
                                                                            " class="col pointer d-flex"
                                                                            pTooltip="{{ child.subCatName }}"
                                                                            tooltipPosition="bottom">
                                                                            {{ child.subCatName}}
                                                                        </div>
                                                                        <p-accordion>


                                                                            <p-accordionTab
                                                                                class="ct_business_drop_12_main"
                                                                                header="Business Travel"
                                                                                *ngIf="head.manageDataPointCategorySeedID ==13"
                                                                                clickable (click)="
                                                                                ToggleClick(
                                                                                    )
                                                                            " pTooltip="{{ child.subCatName }}">

                                                                                <ul class="ct_dropdwon_item"
                                                                                    [class.ct_open_modal]="isVisited == true">
                                                                                    <li
                                                                                        (click)="setActive(24, child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Flight
                                                                                    </li>
                                                                                    <li
                                                                                        (click)="setActive(25, child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Hotel
                                                                                        Stay
                                                                                    </li>
                                                                                    <li
                                                                                        (click)="setActive(26, child,
                                                                                    head.manageDataPointCategorySeedID, head.catName)">
                                                                                        Other
                                                                                        Modes
                                                                                        of Transport
                                                                                    </li>
                                                                                </ul>
                                                                            </p-accordionTab>
                                                                        </p-accordion>

                                                                    </div>


                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                    </p-accordion>
                                                </div>
                                            </div>
                                        </div>
                                    </p-tabPanel>
                                </ng-container>
                            </p-tabView>

                        </div>
                    </form>
                    <div class="view-request ct_view_request_btn d-flex justify-content-center" (click)="showDialog()"
                        [routerLink]="['/tracking-view-requests']" [queryParams]="{data: facilityID}">
                        View and Approve Request
                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-9 mb-4 px-2">
            <div class="TrackingDiv2-border Dashboard-tab ct_dash_board_tab text-white ct_scroll_dash"
                style="height: calc(100vh - 130px);">

                <div [ngStyle]="{display: facilitynothavedp}" style="justify-content: center" class="noData">
                    <div>
                        <div class="icon mt-3">
                            <i class="fa fa-info-circle" style="font-size: 20px" aria-hidden="true"></i>
                        </div>
                        <label class="label"> No data point for entries</label>
                    </div>
                </div>
                <div [ngStyle]="{display: forGroup}" style="justify-content: center" class="noData">
                    <div>
                        <div class="icon mt-3">
                            <i class="fa fa-info-circle" style="font-size: 20px" aria-hidden="true"></i>
                        </div>
                        <label class="label"> Please select facility</label>
                    </div>
                </div>
                <div class="ct_scroll_60012" [ngStyle]="{display: facilityhavedp}" *ngIf="categoryId">



                    <p-tabView [ngStyle]="{display: facilityhavedp}" #dataentryTab activeIndex="{{ activeindex }}"
                        (onChange)="onTabChange($event)">

                        <p-tabPanel header="Data Entry">
                            <ng-container *ngComponentOutlet="dynamicComponent"></ng-container>
                        </p-tabPanel>

                        <p-tabPanel header="Status">
                            <app-status-table [categoryId]="categoryId" [data]="dataEntriesPending"
                                [businessId]="businessId"></app-status-table>
                        </p-tabPanel>

                        <p-tabPanel header="Settings">
                            <app-settings-table [categoryId]="categoryId" [data]="dataEntriesPending"
                                [businessId]="businessId"></app-settings-table>
                        </p-tabPanel>
                    </p-tabView>
                </div>
            </div>
        </div>
    </div>
</div>

<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-clip-rotate-pulse" [fullScreen]="true">
    <p style="color: white"> </p>
</ngx-spinner>
<router-outlet></router-outlet>



<!-- <button style="width: 60px;" id="" (click)="onToggleMenuSidebar()">check</button> -->